<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¶ˆæ¶ˆä¹ - å¼€å§‹é¡µé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .game-title {
            font-size: clamp(32px, 8vw, 48px);
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 40px;
            text-align: center;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .menu-container {
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            animation: fadeInUp 0.8s ease-out 0.3s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .menu-button {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 16px;
            padding: 20px;
            font-size: 18px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .menu-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }

        .menu-button:hover:before {
            left: 100%;
        }

        .menu-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background: rgba(255, 255, 255, 1);
        }

        .menu-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .menu-icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            margin-right: 10px;
            vertical-align: middle;
        }

        .classic-mode .menu-icon {
            color: #667eea;
        }

        .boss-mode .menu-icon {
            color: #e74c3c;
        }

        .leaderboard .menu-icon {
            color: #f39c12;
        }

        .about .menu-icon {
            color: #2ecc71;
        }

        @media (max-width: 480px) {
            .game-title {
                font-size: 32px;
                margin-bottom: 30px;
            }

            .menu-button {
                padding: 16px;
                font-size: 16px;
            }

            body {
                padding: 10px;
            }
        }

        @media (min-width: 768px) {
            .menu-container {
                max-width: 450px;
            }

            .menu-button {
                padding: 24px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <h1 class="game-title">æ¶ˆæ¶ˆä¹</h1>

    <div class="menu-container">
        <button class="menu-button classic-mode" onclick="startClassicMode()">
            <span class="menu-icon">ğŸ®</span>
            ç»å…¸æ¨¡å¼
        </button>

        <button class="menu-button boss-mode" onclick="startBossMode()">
            <span class="menu-icon">âš”ï¸</span>
            Bossæˆ˜æ¨¡å¼
        </button>

        <button class="menu-button leaderboard" onclick="showLeaderboard()">
            <span class="menu-icon">ğŸ†</span>
            æ’è¡Œæ¦œ
        </button>

        <button class="menu-button about" onclick="showAbout()">
            <span class="menu-icon">â„¹ï¸</span>
            æ¸¸æˆè¯´æ˜
        </button>
    </div>

    <script>
        // é¡µé¢åŠ è½½åŠ¨ç”»
        window.addEventListener('load', () => {
            document.body.style.opacity = '1';
        });

        // ç»å…¸æ¨¡å¼
        function startClassicMode() {
            localStorage.setItem('gameStarted', 'true');
            localStorage.setItem('gameMode', 'classic');
            window.location.href = 'index.html';
        }

        // Bossæˆ˜æ¨¡å¼
        function startBossMode() {
            localStorage.setItem('gameStarted', 'true');
            localStorage.setItem('gameMode', 'boss');
            window.location.href = 'index.html';
        }

        // æ˜¾ç¤ºæ’è¡Œæ¦œ
        function showLeaderboard() {
            let leaderboardHtml = `
                <!DOCTYPE html>
                <html lang="zh-CN">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
                    <title>æ’è¡Œæ¦œ - æ¶ˆæ¶ˆä¹</title>
                    <style>
                        body {
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            min-height: 100vh;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            padding: 20px;
                            color: white;
                            -webkit-tap-highlight-color: transparent;
                        }

                        .header {
                            width: 100%;
                            text-align: center;
                            margin-bottom: 30px;
                        }

                        .header h1 {
                            font-size: clamp(24px, 6vw, 36px);
                            margin-bottom: 10px;
                        }

                        .back-button {
                            background: rgba(255,255,255,0.2);
                            border: none;
                            border-radius: 20px;
                            padding: 8px 16px;
                            color: white;
                            cursor: pointer;
                            font-size: 14px;
                            transition: background 0.3s;
                        }

                        .back-button:hover {
                            background: rgba(255,255,255,0.3);
                        }

                        .leaderboard-container {
                            width: 100%;
                            max-width: 400px;
                            background: rgba(255,255,255,0.1);
                            backdrop-filter: blur(10px);
                            border-radius: 20px;
                            padding: 20px;
                            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
                        }

                        .mode-tabs {
                            display: flex;
                            margin-bottom: 20px;
                            background: rgba(255,255,255,0.1);
                            border-radius: 12px;
                            padding: 4px;
                        }

                        .mode-tab {
                            flex: 1;
                            background: none;
                            border: none;
                            color: rgba(255,255,255,0.7);
                            padding: 10px;
                            cursor: pointer;
                            border-radius: 8px;
                            transition: all 0.3s;
                            font-size: 14px;
                            font-weight: 500;
                        }

                        .mode-tab.active {
                            background: rgba(255,255,255,0.2);
                            color: white;
                        }

                        .leaderboard-list {
                            list-style: none;
                        }

                        .leaderboard-item {
                            display: flex;
                            align-items: center;
                            padding: 12px;
                            margin-bottom: 8px;
                            background: rgba(255,255,255,0.1);
                            border-radius: 12px;
                            transition: transform 0.2s;
                        }

                        .leaderboard-item:hover {
                            transform: translateX(5px);
                        }

                        .rank {
                            width: 30px;
                            height: 30px;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-weight: bold;
                            margin-right: 15px;
                            font-size: 14px;
                        }

                        .rank-1 { background: #FFD700; color: #333; }
                        .rank-2 { background: #C0C0C0; color: #333; }
                        .rank-3 { background: #CD7F32; color: white; }
                        .rank-other { background: rgba(255,255,255,0.3); color: white; }

                        .player-info {
                            flex: 1;
                        }

                        .player-name {
                            font-size: 16px;
                            margin-bottom: 4px;
                        }

                        .player-score {
                            font-size: 14px;
                            opacity: 0.8;
                        }

                        .no-scores {
                            text-align: center;
                            padding: 40px 20px;
                            opacity: 0.7;
                        }

                        @media (max-width: 480px) {
                            .leaderboard-container {
                                padding: 15px;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <button class="back-button" onclick="window.history.back()">â† è¿”å›</button>
                        <h1>æ’è¡Œæ¦œ</h1>
                    </div>

                    <div class="leaderboard-container">
                        <div class="mode-tabs">
                            <button class="mode-tab active" onclick="switchTab('classic')">ç»å…¸æ¨¡å¼</button>
                            <button class="mode-tab" onclick="switchTab('boss')">Bossæˆ˜æ¨¡å¼</button>
                        </div>

                        <div id="leaderboard-content">
                            <div id="classic-leaderboard" class="leaderboard-section">
                                <ul class="leaderboard-list" id="classic-list"></ul>
                            </div>
                            <div id="boss-leaderboard" class="leaderboard-section" style="display: none;">
                                <ul class="leaderboard-list" id="boss-list"></ul>
                            </div>
                        </div>
                    </div>

                    <script>
                        // åˆ‡æ¢æ ‡ç­¾
                        function switchTab(mode) {
                            document.querySelectorAll('.mode-tab').forEach(tab => {
                                tab.classList.remove('active');
                            });
                            event.target.classList.add('active');

                            document.getElementById('classic-leaderboard').style.display = mode === 'classic' ? 'block' : 'none';
                            document.getElementById('boss-leaderboard').style.display = mode === 'boss' ? 'block' : 'none';

                            loadLeaderboard(mode);
                        }

                        // åŠ è½½æ’è¡Œæ¦œæ•°æ®
                        function loadLeaderboard(mode) {
                            const key = mode === 'classic' ? 'classicScores' : 'bossScores';
                            const scores = JSON.parse(localStorage.getItem(key) || '[]');
                            const listElement = document.getElementById(mode === 'classic' ? 'classic-list' : 'boss-list');

                            if (scores.length === 0) {
                                listElement.innerHTML = '<div class="no-scores">æš‚æ— è®°å½•</div>';
                                return;
                            }

                            listElement.innerHTML = scores.sort((a, b) => b.score - a.score).map((entry, index) => {
                                const rankClass = index < 3 ? `rank-${index + 1}` : 'rank-other';
                                return `
                                    <li class="leaderboard-item">
                                        <div class="rank ${rankClass}">${index + 1}</div>
                                        <div class="player-info">
                                            <div class="player-name">${entry.name}</div>
                                            <div class="player-score">${entry.score} åˆ† - ${entry.steps} æ­¥</div>
                                        </div>
                                    </li>
                                `;
                            }).join('');
                        }

                        // é¡µé¢åŠ è½½æ—¶åŠ è½½æ’è¡Œæ¦œ
                        window.addEventListener('load', () => {
                            loadLeaderboard('classic');
                        });
                    </script>
                </body>
                </html>
            `;

            const newWindow = window.open('', '_blank');
            newWindow.document.write(leaderboardHtml);
            newWindow.document.close();
        }

        // æ˜¾ç¤ºæ¸¸æˆè¯´æ˜
        function showAbout() {
            let aboutHtml = `
                <!DOCTYPE html>
                <html lang="zh-CN">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
                    <title>æ¸¸æˆè¯´æ˜ - æ¶ˆæ¶ˆä¹</title>
                    <style>
                        body {
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            min-height: 100vh;
                            display: flex;
                            flex-direction: column;
                            padding: 20px;
                            color: white;
                            -webkit-tap-highlight-color: transparent;
                        }

                        .header {
                            width: 100%;
                            text-align: center;
                            margin-bottom: 30px;
                        }

                        .header h1 {
                            font-size: clamp(24px, 6vw, 36px);
                            margin-bottom: 10px;
                        }

                        .back-button {
                            background: rgba(255,255,255,0.2);
                            border: none;
                            border-radius: 20px;
                            padding: 8px 16px;
                            color: white;
                            cursor: pointer;
                            font-size: 14px;
                            transition: background 0.3s;
                        }

                        .back-button:hover {
                            background: rgba(255,255,255,0.3);
                        }

                        .content-container {
                            width: 100%;
                            max-width: 600px;
                            background: rgba(255,255,255,0.1);
                            backdrop-filter: blur(10px);
                            border-radius: 20px;
                            padding: 30px;
                            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
                            flex: 1;
                        }

                        .game-mode {
                            margin-bottom: 30px;
                        }

                        .mode-title {
                            font-size: 20px;
                            font-weight: bold;
                            margin-bottom: 15px;
                            color: #FFD700;
                        }

                        .mode-description {
                            line-height: 1.6;
                            margin-bottom: 15px;
                            opacity: 0.9;
                        }

                        .features {
                            background: rgba(255,255,255,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            margin-top: 20px;
                        }

                        .features h3 {
                            margin-bottom: 15px;
                            font-size: 18px;
                        }

                        .feature-list {
                            list-style: none;
                        }

                        .feature-item {
                            display: flex;
                            align-items: center;
                            margin-bottom: 10px;
                            padding: 8px 12px;
                            background: rgba(255,255,255,0.05);
                            border-radius: 8px;
                            transition: transform 0.2s;
                        }

                        .feature-item:hover {
                            transform: translateX(5px);
                        }

                        .feature-icon {
                            font-size: 20px;
                            margin-right: 12px;
                        }

                        @media (max-width: 480px) {
                            .content-container {
                                padding: 20px;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <button class="back-button" onclick="window.history.back()">â† è¿”å›</button>
                        <h1>æ¸¸æˆè¯´æ˜</h1>
                    </div>

                    <div class="content-container">
                        <div class="game-mode">
                            <h2 class="mode-title">ğŸ® ç»å…¸æ¨¡å¼</h2>
                            <p class="mode-description">
                                ç»å…¸æ¶ˆæ¶ˆä¹ç©æ³•ï¼Œé€šè¿‡äº¤æ¢ç›¸é‚»çš„å®çŸ³ï¼ŒåŒ¹é…3ä¸ªæˆ–æ›´å¤šç›¸åŒé¢œè‰²çš„å®çŸ³æ¥æ¶ˆé™¤å®ƒä»¬ã€‚
                            </p>
                            <p class="mode-description">
                                æ¯æ¬¡æ¶ˆé™¤éƒ½ä¼šè·å¾—åˆ†æ•°ï¼Œå°½å¯èƒ½è·å¾—æ›´é«˜çš„åˆ†æ•°ï¼
                            </p>
                        </div>

                        <div class="game-mode">
                            <h2 class="mode-title">âš”ï¸ Bossæˆ˜æ¨¡å¼</h2>
                            <p class="mode-description">
                                æŒ‘æˆ˜70ä¸ªä¸åŒçš„Bossï¼æ¯ä¸ªBosséƒ½æœ‰ç‹¬ç‰¹çš„æŠ€èƒ½å’Œè¡€é‡ï¼Œä½ éœ€è¦é€šè¿‡æ¶ˆé™¤å®çŸ³æ¥å¯¹Bossé€ æˆä¼¤å®³ã€‚
                            </p>
                            <p class="mode-description">
                                Bossä¼šä½¿ç”¨æŠ€èƒ½é˜»æ­¢ä½ ï¼Œåˆç†ä½¿ç”¨é“å…·æ˜¯è·èƒœçš„å…³é”®ï¼
                            </p>
                        </div>

                        <div class="features">
                            <h3>ğŸ¯ æ¸¸æˆç‰¹è‰²</h3>
                            <ul class="feature-list">
                                <li class="feature-item">
                                    <span class="feature-icon">ğŸ’</span>
                                    <span>4ç§ä¸åŒçš„å®çŸ³å½¢çŠ¶</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-icon">ğŸ</span>
                                    <span>6ç§å¼ºåŠ›é“å…·ç³»ç»Ÿ</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-icon">ğŸ†</span>
                                    <span>æ’è¡Œæ¦œç³»ç»Ÿï¼ŒæŒ‘æˆ˜é«˜åˆ†</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-icon">ğŸ“±</span>
                                    <span>å®Œç¾é€‚é…æ‰‹æœºç«¯</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-icon">âœ¨</span>
                                    <span>æµç•…çš„åŠ¨ç”»æ•ˆæœ</span>
                                </li>
                                <li class="feature-item">
                                    <span class="feature-icon">ğŸ’¾</span>
                                    <span>è‡ªåŠ¨ä¿å­˜è¿›åº¦</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </body>
                </html>
            `;

            const newWindow = window.open('', '_blank');
            newWindow.document.write(aboutHtml);
            newWindow.document.close();
        }
    </script>
</body>
</html>